<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastro/Login</title>
  <link rel="stylesheet" href="./styles/cadastro.css" />
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
  <main>
    <section class="org__blocos">
      
      
      <div class="bloco__esquerda">
        <img src="assets/academyBranco.png" class="academy">
        <h1>BEM VINDO DE VOLTA!</h1>
        <p>Para voltar ao menu clique abaixo:</p>
        
        <a href="inicio.html" class="div__botao__esq"  >
        <div class="botao__esq" >
         INICIO
         </div>
         </a>
      </div>

      
      <div class="bloco__direita">
        <h2 id="titulo__conta">Criar Conta</h2>

        <div id="div__logins">
         
          <i class='bx bxl-google' id="icons" onclick="loginGoogle()" ></i>
        </div>

        <p id="texto">ou use seu email para cadastrar:</p>

        <form id="formCadastro">
          <input type="email" id="email" class="input_email" placeholder="Digite seu melhor email" required>
          <input type="password" id="senha" class="input_senha" placeholder="Digite sua senha" required>
          <button type="submit" class="botao">Cadastrar</button>
        </form>
      </div>
    </section>
  </main>

  
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';
    import { 
      getAuth, 
      createUserWithEmailAndPassword, 
      signInWithPopup, 
      GoogleAuthProvider,
    } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js';

    const firebaseConfig = {
      apiKey: "AIzaSyAJ4V74e4RPNuiYsM4pG6foUqeXXgiWTEY",
      authDomain: "academydatas-dc1a2.firebaseapp.com",
      projectId: "academydatas-dc1a2",
      storageBucket: "academydatas-dc1a2.firebasestorage.app",
      messagingSenderId: "932482523151",
      appId: "1:932482523151:web:d6bb14f77b8d93b5c2837a"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const googleProvider = new GoogleAuthProvider();
    


window.loginGoogle = async () => {
  try {
    const result = await signInWithPopup(auth, googleProvider);
    const user = result.user;
    
    alert(`Bem-vindo, ${user.displayName}!`);
    // window.location.href = 'inicio.html'; // descomente se quiser redirecionar
    
  } catch (error) {
    console.error('Erro no login com Google:', error);
    alert('Erro no login: ' + error.message);
  }
};


    document.getElementById("formCadastro").addEventListener("submit", (e) => {
      e.preventDefault();
      const email = document.getElementById("email").value;
      const senha = document.getElementById("senha").value;

      createUserWithEmailAndPassword(auth, email, senha)
        .then((userCredential) => {
          alert("Seus dados foram cadastrados com sucesso!");
          document.getElementById("formCadastro").reset();
        })
        .catch((error) => {
          alert("Erro: " + error.message);
        });
    });
  </script>
</body>
</html>
